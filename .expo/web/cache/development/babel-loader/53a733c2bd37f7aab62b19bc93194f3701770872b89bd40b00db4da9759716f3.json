{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\programming\\\\apper\\\\camera-app\\\\App.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  var cameraRef = useRef();\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasCameraPermission = _useState2[0],\n    setHasCameraPermission = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    hasMediaLibraryPermission = _useState4[0],\n    setHasMediaLibraryPermission = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    photo = _useState6[0],\n    setPhoto = _useState6[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var cameraPermission = yield Camera.requestCameraPermissionsAsync();\n      var mediaLibraryPermission = yield MediaLibrary.requestPermissionsAsync();\n      setHasCameraPermission(cameraPermission.status === \"granted\");\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n    })();\n  }, []);\n  if (hasCameraPermission === undefined) {\n    return _jsxDEV(Text, {\n      children: \"Requesting permissions...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 12\n    }, this);\n  } else if (!hasCameraPermission) {\n    return _jsxDEV(Text, {\n      children: \"Permission for camera not granted. Please change this in settings.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 12\n    }, this);\n  }\n  var takePic = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var options = {\n        quality: 1,\n        base64: true,\n        exif: false\n      };\n      var newPhoto = yield cameraRef.current.takePictureAsync(options);\n      setPhoto(newPhoto);\n    });\n    return function takePic() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var sendPhotoToServer = function () {\n    var _ref3 = _asyncToGenerator(function* (photoUri) {\n      try {\n        var formData = new FormData();\n        formData.append('photo', {\n          uri: photoUri,\n          type: 'image/jpeg',\n          name: 'photo.jpg'\n        });\n        var response = yield axios.post('http://localhost:19006/', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        alert('Фотография успешно отправлена:', response.data);\n      } catch (error) {\n        alert('Ошибка при отправке фотографии:', error);\n      }\n    });\n    return function sendPhotoToServer(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  if (photo) {\n    var sharePic = function sharePic() {\n      shareAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n    var savePhoto = function savePhoto() {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n    return _jsxDEV(SafeAreaView, {\n      style: styles.container,\n      children: [_jsxDEV(Image, {\n        style: styles.preview,\n        source: {\n          uri: \"data:image/jpg;base64,\" + photo.base64\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), _jsxDEV(Button, {\n        title: \"Share\",\n        onPress: sharePic\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), hasMediaLibraryPermission ? _jsxDEV(Button, {\n        title: \"Save\",\n        onPress: savePhoto\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 38\n      }, this) : undefined, _jsxDEV(Button, {\n        title: \"Send\",\n        onPress: function onPress() {\n          return sendPhotoToServer(photo.uri);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), _jsxDEV(Button, {\n        title: \"Discard\",\n        onPress: function onPress() {\n          return setPhoto(undefined);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n  return _jsxDEV(Camera, {\n    style: styles.container,\n    ref: cameraRef,\n    children: [_jsxDEV(View, {\n      style: styles.buttonContainer,\n      children: _jsxDEV(Button, {\n        title: \"Take Pic\",\n        onPress: takePic\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), _jsxDEV(StatusBar, {\n      style: \"auto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n  },\n  preview: {\n    alignSelf: 'stretch',\n    flex: 1\n  }\n});","map":{"version":3,"names":["React","useEffect","useRef","useState","StyleSheet","Text","View","SafeAreaView","Button","Image","StatusBar","Camera","shareAsync","MediaLibrary","axios","jsxDEV","_jsxDEV","App","cameraRef","_useState","_useState2","_slicedToArray","hasCameraPermission","setHasCameraPermission","_useState3","_useState4","hasMediaLibraryPermission","setHasMediaLibraryPermission","_useState5","_useState6","photo","setPhoto","_asyncToGenerator","cameraPermission","requestCameraPermissionsAsync","mediaLibraryPermission","requestPermissionsAsync","status","undefined","children","fileName","_jsxFileName","lineNumber","columnNumber","takePic","_ref2","options","quality","base64","exif","newPhoto","current","takePictureAsync","apply","arguments","sendPhotoToServer","_ref3","photoUri","formData","FormData","append","uri","type","name","response","post","headers","alert","data","error","_x","sharePic","then","savePhoto","saveToLibraryAsync","style","styles","container","preview","source","title","onPress","ref","buttonContainer","create","flex","alignItems","justifyContent","backgroundColor","alignSelf"],"sources":["D:/programming/apper/camera-app/App.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { StyleSheet, Text, View, SafeAreaView, Button, Image, StatusBar } from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\nimport axios from 'axios';\n\nexport default function App() {\n let cameraRef = useRef();\n const [hasCameraPermission, setHasCameraPermission] = useState();\n const [hasMediaLibraryPermission, setHasMediaLibraryPermission] = useState();\n const [photo, setPhoto] = useState();\n\n useEffect(() => {\n    (async () => {\n      const cameraPermission = await Camera.requestCameraPermissionsAsync();\n      const mediaLibraryPermission = await MediaLibrary.requestPermissionsAsync();\n      setHasCameraPermission(cameraPermission.status === \"granted\");\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n    })();\n }, []);\n\n if (hasCameraPermission === undefined) {\n    return <Text>Requesting permissions...</Text>\n } else if (!hasCameraPermission) {\n    return <Text>Permission for camera not granted. Please change this in settings.</Text>\n }\n\n let takePic = async () => {\n    let options = {\n      quality: 1,\n      base64: true,\n      exif: false\n    };\n\n    let newPhoto = await cameraRef.current.takePictureAsync(options);\n    setPhoto(newPhoto);\n };\n\n const sendPhotoToServer = async (photoUri) => {\n    try {\n      const formData = new FormData();\n      formData.append('photo', {\n        uri: photoUri,\n        type: 'image/jpeg', // или другой тип файла, в зависимости от вашей фотографии\n        name: 'photo.jpg',\n      });\n\n      const response = await axios.post('http://localhost:19006/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      alert('Фотография успешно отправлена:', response.data);\n    } catch (error) {\n      alert('Ошибка при отправке фотографии:', error);\n    }\n };\n\n if (photo) {\n    let sharePic = () => {\n      shareAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    let savePhoto = () => {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    return (\n      <SafeAreaView style={styles.container}>\n        <Image style={styles.preview} source={{ uri: \"data:image/jpg;base64,\" + photo.base64 }} />\n        <Button title=\"Share\" onPress={sharePic} />\n        {hasMediaLibraryPermission ? <Button title=\"Save\" onPress={savePhoto} /> : undefined}\n        <Button title=\"Send\" onPress={() => sendPhotoToServer(photo.uri)} />\n        <Button title=\"Discard\" onPress={() => setPhoto(undefined)} />\n      </SafeAreaView>\n    );\n }\n\n return (\n    <Camera style={styles.container} ref={cameraRef}>\n      <View style={styles.buttonContainer}>\n        <Button title=\"Take Pic\" onPress={takePic} />\n      </View>\n      <StatusBar style=\"auto\" />\n    </Camera>\n );\n}\n\nconst styles = StyleSheet.create({\n container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n },\n buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n },\n preview: {\n    alignSelf: 'stretch',\n    flex: 1\n }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}