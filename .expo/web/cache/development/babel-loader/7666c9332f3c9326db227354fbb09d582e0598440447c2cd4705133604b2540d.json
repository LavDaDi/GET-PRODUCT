{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useEffect, useRef, useState } from 'react';\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var cameraRef = useRef();\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasCameraPermission = _useState2[0],\n    setHasCameraPermission = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    hasMediaLibraryPermission = _useState4[0],\n    setHasMediaLibraryPermission = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    photo = _useState6[0],\n    setPhoto = _useState6[1];\n  useEffect(function () {\n    (function _callee() {\n      var cameraPermission, mediaLibraryPermission;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestCameraPermissionsAsync());\n            case 2:\n              cameraPermission = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(MediaLibrary.requestPermissionsAsync());\n            case 5:\n              mediaLibraryPermission = _context.sent;\n              setHasCameraPermission(cameraPermission.status === \"granted\");\n              setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  if (hasCameraPermission === undefined) {\n    return _jsx(Text, {\n      children: \"Requesting permissions...\"\n    });\n  } else if (!hasCameraPermission) {\n    return _jsx(Text, {\n      children: \"Permission for camera not granted. Please change this in settings.\"\n    });\n  }\n  var takePic = function takePic() {\n    var options, newPhoto;\n    return _regeneratorRuntime.async(function takePic$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            options = {\n              quality: 1,\n              base64: true,\n              exif: false\n            };\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(cameraRef.current.takePictureAsync(options));\n          case 3:\n            newPhoto = _context2.sent;\n            setPhoto(newPhoto);\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n  if (photo) {\n    var sharePic = function sharePic() {\n      shareAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n    var savePhoto = function savePhoto() {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n    return _jsxs(SafeAreaView, {\n      style: styles.container,\n      children: [_jsx(Image, {\n        style: styles.preview,\n        source: {\n          uri: \"data:image/jpg;base64,\" + photo.base64\n        }\n      }), _jsx(Button, {\n        title: \"Share\",\n        onPress: sharePic\n      }), hasMediaLibraryPermission ? _jsx(Button, {\n        title: \"Save\",\n        onPress: savePhoto\n      }) : undefined, _jsx(Button, {\n        title: \"Discard\",\n        onPress: function onPress() {\n          return setPhoto(undefined);\n        }\n      })]\n    });\n  }\n  return _jsxs(Camera, {\n    style: styles.container,\n    ref: cameraRef,\n    children: [_jsx(View, {\n      style: styles.buttonContainer,\n      children: _jsx(Button, {\n        title: \"Take Pic\",\n        onPress: takePic\n      })\n    }), _jsx(StatusBar, {\n      style: \"auto\"\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n  },\n  preview: {\n    alignSelf: 'stretch',\n    flex: 1\n  }\n});","map":{"version":3,"names":["StatusBar","StyleSheet","Text","View","SafeAreaView","Button","Image","useEffect","useRef","useState","Camera","shareAsync","MediaLibrary","jsx","_jsx","jsxs","_jsxs","App","cameraRef","_useState","_useState2","_slicedToArray","hasCameraPermission","setHasCameraPermission","_useState3","_useState4","hasMediaLibraryPermission","setHasMediaLibraryPermission","_useState5","_useState6","photo","setPhoto","_callee","cameraPermission","mediaLibraryPermission","_regeneratorRuntime","async","_callee$","_context","prev","next","awrap","requestCameraPermissionsAsync","sent","requestPermissionsAsync","status","stop","Promise","undefined","children","takePic","options","newPhoto","takePic$","_context2","quality","base64","exif","current","takePictureAsync","sharePic","uri","then","savePhoto","saveToLibraryAsync","style","styles","container","preview","source","title","onPress","ref","buttonContainer","create","flex","alignItems","justifyContent","backgroundColor","alignSelf"],"sources":["D:/programming/apper/camera-app/App.js"],"sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport { StyleSheet, Text, View, SafeAreaView, Button, Image } from 'react-native';\nimport { useEffect, useRef, useState } from 'react';\nimport { Camera } from 'expo-camera';\nimport { shareAsync } from 'expo-sharing';\nimport * as MediaLibrary from 'expo-media-library';\n\nexport default function App() {\n  let cameraRef = useRef();\n  const [hasCameraPermission, setHasCameraPermission] = useState();\n  const [hasMediaLibraryPermission, setHasMediaLibraryPermission] = useState();\n  const [photo, setPhoto] = useState();\n\n  useEffect(() => {\n    (async () => {\n      const cameraPermission = await Camera.requestCameraPermissionsAsync();\n      const mediaLibraryPermission = await MediaLibrary.requestPermissionsAsync();\n      setHasCameraPermission(cameraPermission.status === \"granted\");\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n    })();\n  }, []);\n\n  if (hasCameraPermission === undefined) {\n    return <Text>Requesting permissions...</Text>\n  } else if (!hasCameraPermission) {\n    return <Text>Permission for camera not granted. Please change this in settings.</Text>\n  }\n\n  let takePic = async () => {\n    let options = {\n      quality: 1,\n      base64: true,\n      exif: false\n    };\n\n    let newPhoto = await cameraRef.current.takePictureAsync(options);\n    setPhoto(newPhoto);\n  };\n\n  if (photo) {\n    let sharePic = () => {\n      shareAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    let savePhoto = () => {\n      MediaLibrary.saveToLibraryAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    return (\n      <SafeAreaView style={styles.container}>\n        <Image style={styles.preview} source={{ uri: \"data:image/jpg;base64,\" + photo.base64 }} />\n        <Button title=\"Share\" onPress={sharePic} />\n        {hasMediaLibraryPermission ? <Button title=\"Save\" onPress={savePhoto} /> : undefined}\n        <Button title=\"Discard\" onPress={() => setPhoto(undefined)} />\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <Camera style={styles.container} ref={cameraRef}>\n      <View style={styles.buttonContainer}>\n        <Button title=\"Take Pic\" onPress={takePic} />\n      </View>\n      <StatusBar style=\"auto\" />\n    </Camera>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  buttonContainer: {\n    backgroundColor: '#fff',\n    alignSelf: 'flex-end'\n  },\n  preview: {\n    alignSelf: 'stretch',\n    flex: 1\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}